

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ol-kit | TimeSlider/TimeSliderBase.js</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densityDpi=device-dpi" />


    <!-- these scripts must be at the top to properly syntax highlight code examples -->
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js" integrity="sha256-FiZMk1zgTeujzf/+vomWZGZ9r00+xnGvOgXoj0Jo1jA=" crossorigin="anonymous"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.css">
    <link type="text/css" rel="stylesheet" href="styles/iframe.css">
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    <a href="index.html"><img src="static/ol-kit-logo.png" alt="logo"></a>
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                 
                <div class="navbar-menu">
                    <div class="navbar-end">
                    
                        <div class="navbar-item">
                            <a href="tutorial-Getting%20Started.html">
                                Get Started
                            </a>
                        </div>
                    
                        <div class="navbar-item">
                            <a href="docs.html">
                                Docs
                            </a>
                        </div>
                    
                        <div class="navbar-item">
                            <a href="https://github.com/MonsantoCo/ol-kit">
                                Github
                            </a>
                        </div>
                    
                    </div>
                </div>
                
            </nav>
        </div>
    </div>
    <div id="page-wrapper" class="container">
        <div class="columns">
            <div class="column is-3" id="sidebar-nav">
                <div class="sidebar sidebar__inner">
                    <nav>
                        <div class="category"><h3>Tutorials</h3><ul><li><a class="undefined"href="tutorial-Getting Started.html">Getting Started</a></li><li><a class="undefined"href="tutorial-LayerPanel_.html">LayerPanel</a></li><li><a class="undefined"href="tutorial-Popup_.html">Popup</a></li><li><a class="undefined"href="tutorial-TimeSlider_.html">TimeSlider</a></li><li><a class="undefined"href="tutorial-connectToContext.html">connectToContext</a></li><li><a class="undefined"href="tutorial-i18n Support.html">i18n Support</a></li></ul><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Utils</h3><ul><li><a href="global.html#_applyWMSStyles">_applyWMSStyles</a></li><li><a href="global.html#_makeRequest">_makeRequest</a></li><li><a href="global.html#clearFeatures">clearFeatures</a></li><li><a href="global.html#describeFeatureType">describeFeatureType</a></li><li><a href="global.html#FEATURE_PREFIX">FEATURE_PREFIX</a></li><li><a href="global.html#FESNS">FESNS</a></li><li><a href="global.html#fetchFeatures">fetchFeatures</a></li><li><a href="global.html#fetchFeaturesAtClick">fetchFeaturesAtClick</a></li><li><a href="global.html#fetchFeaturesIntersectingExtent">fetchFeaturesIntersectingExtent</a></li><li><a href="global.html#fetchFeaturesIntersectingGeom">fetchFeaturesIntersectingGeom</a></li><li><a href="global.html#fetchValuesForAttribute">fetchValuesForAttribute</a></li><li><a href="global.html#fromURI">fromURI</a></li><li><a href="global.html#getAttributes">getAttributes</a></li><li><a href="global.html#getCapabilities">getCapabilities</a></li><li><a href="global.html#getDefaultWMSStyles">getDefaultWMSStyles</a></li><li><a href="global.html#getFeatures">getFeatures</a></li><li><a href="global.html#getGeometryName">getGeometryName</a></li><li><a href="global.html#getLayerInfo">getLayerInfo</a></li><li><a href="global.html#getSLDBody">getSLDBody</a></li><li><a href="global.html#getTypeName">getTypeName</a></li><li><a href="global.html#getUri">getUri</a></li><li><a href="global.html#getUserWMSStyles">getUserWMSStyles</a></li><li><a href="global.html#getWFSLayer">getWFSLayer</a></li><li><a href="global.html#getWMSFilters">getWMSFilters</a></li><li><a href="global.html#getWMSLayer">getWMSLayer</a></li><li><a href="global.html#getZIndex">getZIndex</a></li><li><a href="global.html#objectStack%255Bundefined%255D">objectStack[undefined]</a></li><li><a href="global.html#OGCNS">OGCNS</a></li><li><a href="global.html#resetDefaultWMSStyles">resetDefaultWMSStyles</a></li><li><a href="global.html#setDefaultWMSStyles">setDefaultWMSStyles</a></li><li><a href="global.html#setUserWMSStyles">setUserWMSStyles</a></li><li><a href="global.html#setWMSFilters">setWMSFilters</a></li><li><a href="global.html#setZIndex">setZIndex</a></li><li><a href="global.html#writeGetFeature">writeGetFeature</a></li><li><a href="global.html#writeOgcExpression">writeOgcExpression</a></li><li><a href="global.html#writeOgcLiteral">writeOgcLiteral</a></li><li><a href="global.html#writeOgcPropertyName">writeOgcPropertyName</a></li><li><a href="global.html#writeQuery">writeQuery</a></li><li><a href="global.html#XMLNS">XMLNS</a></li></ul></div><div class="category"><h2>Basemap</h2><h3>Components</h3><ul><li><a href="BasemapBingMaps.html">BasemapBingMaps</a></li><li><a href="BasemapBlankWhite.html">BasemapBlankWhite</a></li><li><a href="BasemapContainer.html">BasemapContainer</a></li><li><a href="BasemapManager.html">BasemapManager</a></li><li><a href="BasemapOpenStreetMap.html">BasemapOpenStreetMap</a></li><li><a href="BasemapStamenTerrain.html">BasemapStamenTerrain</a></li><li><a href="BasemapStamenTonerDark.html">BasemapStamenTonerDark</a></li><li><a href="BasemapStamenTonerLite.html">BasemapStamenTonerLite</a></li></ul></div><div class="category"><h2>Classes</h2><h3>Classes</h3><ul><li><a href="VectorLayer.html">VectorLayer</a></li></ul></div><div class="category"><h2>ContextMenu</h2><h3>Components</h3><ul><li><a href="ContextMenu.html">ContextMenu</a></li><li><a href="ContextMenuCoords.html">ContextMenuCoords</a></li><li><a href="ContextMenuListItem.html">ContextMenuListItem</a></li></ul></div><div class="category"><h2>Controls</h2><h3>Components</h3><ul><li><a href="Compass.html">Compass</a></li><li><a href="ControlGroup.html">ControlGroup</a></li><li><a href="ControlGroupButton.html">ControlGroupButton</a></li><li><a href="Controls.html">Controls</a></li><li><a href="CurrentLocation.html">CurrentLocation</a></li><li><a href="ZoomControls.html">ZoomControls</a></li><li><a href="ZoomIn.html">ZoomIn</a></li><li><a href="ZoomOut.html">ZoomOut</a></li></ul></div><div class="category"><h2>DataLayers</h2><h3>Utils</h3><ul><li><a href="global.html#loadDataLayer">loadDataLayer</a></li></ul></div><div class="category"><h2>Draw</h2><h3>Components</h3><ul><li><a href="Draw.html">Draw</a></li><li><a href="DrawBox.html">DrawBox</a></li><li><a href="DrawCircle.html">DrawCircle</a></li><li><a href="DrawContainer.html">DrawContainer</a></li><li><a href="DrawFreehand.html">DrawFreehand</a></li><li><a href="DrawLine.html">DrawLine</a></li><li><a href="DrawPoint.html">DrawPoint</a></li><li><a href="DrawPolygon.html">DrawPolygon</a></li></ul><h3>Utils</h3><ul><li><a href="global.html#getStyledFeatures">getStyledFeatures</a></li><li><a href="global.html#styleText">styleText</a></li></ul></div><div class="category"><h2>GooglePlacesSearch</h2><h3>Components</h3><ul><li><a href="GooglePlacesSearch.html">GooglePlacesSearch</a></li></ul></div><div class="category"><h2>LayerPanel</h2><h3>Components</h3><ul><li><a href="LayerPanel.html">LayerPanel</a></li><li><a href="LayerPanelActionExport.html">LayerPanelActionExport</a></li><li><a href="LayerPanelActionExtent.html">LayerPanelActionExtent</a></li><li><a href="LayerPanelActionImport.html">LayerPanelActionImport</a></li><li><a href="LayerPanelActionOpacity.html">LayerPanelActionOpacity</a></li><li><a href="LayerPanelActionRemove.html">LayerPanelActionRemove</a></li><li><a href="LayerPanelActions.html">LayerPanelActions</a></li><li><a href="LayerPanelBase.html">LayerPanelBase</a></li><li><a href="LayerPanelCheckbox.html">LayerPanelCheckbox</a></li><li><a href="LayerPanelContent.html">LayerPanelContent</a></li><li><a href="LayerPanelHeader.html">LayerPanelHeader</a></li><li><a href="LayerPanelLayersPage.html">LayerPanelLayersPage</a></li><li><a href="LayerPanelList.html">LayerPanelList</a></li><li><a href="LayerPanelListItem.html">LayerPanelListItem</a></li><li><a href="LayerPanelMenu.html">LayerPanelMenu</a></li><li><a href="LayerPanelPage.html">LayerPanelPage</a></li></ul><h3>Utils</h3><ul><li><a href="global.html#exportFeatures">exportFeatures</a></li></ul></div><div class="category"><h2>LayerStyler</h2><h3>Components</h3><ul><li><a href="LayerStyler.html">LayerStyler</a></li></ul></div><div class="category"><h2>Map</h2><h3>Components</h3><ul><li><a href="Map.html">Map</a></li></ul><h3>Utils</h3><ul><li><a href="global.html#centerAndZoom">centerAndZoom</a></li><li><a href="global.html#convertXYtoLatLong">convertXYtoLatLong</a></li><li><a href="global.html#createMap">createMap</a></li><li><a href="global.html#createSelectInteraction">createSelectInteraction</a></li><li><a href="global.html#updateMapFromUrl">updateMapFromUrl</a></li><li><a href="global.html#updateUrlFromMap">updateUrlFromMap</a></li></ul></div><div class="category"><h2>Popup</h2><h3>Components</h3><ul><li><a href="Popup.html">Popup</a></li><li><a href="PopupActionGroup.html">PopupActionGroup</a></li><li><a href="PopupActionItem.html">PopupActionItem</a></li><li><a href="PopupBase.html">PopupBase</a></li><li><a href="PopupDataList.html">PopupDataList</a></li><li><a href="PopupDefaultInsert.html">PopupDefaultInsert</a></li><li><a href="PopupDefaultPage.html">PopupDefaultPage</a></li><li><a href="PopupPageLayout.html">PopupPageLayout</a></li><li><a href="PopupPageLayoutChild.html">PopupPageLayoutChild</a></li><li><a href="PopupTabs.html">PopupTabs</a></li></ul><h3>Utils</h3><ul><li><a href="global.html#addMovementListener">addMovementListener</a></li><li><a href="global.html#calculateViewPadding">calculateViewPadding</a></li><li><a href="global.html#getLayersAndFeaturesForEvent">getLayersAndFeaturesForEvent</a></li><li><a href="global.html#getPopupPositionFromFeatures">getPopupPositionFromFeatures</a></li><li><a href="global.html#removeMovementListener">removeMovementListener</a></li><li><a href="global.html#sanitizeProperties">sanitizeProperties</a></li></ul></div><div class="category"><h2>PopupActionCopyWkt</h2><h3>Components</h3><ul><li><a href="PopupActionCopyWkt.html">PopupActionCopyWkt</a></li></ul><h3>Utils</h3><ul><li><a href="global.html#convertFeatureToWkt">convertFeatureToWkt</a></li><li><a href="global.html#copyTextToClipboard">copyTextToClipboard</a></li><li><a href="global.html#copyWktToClipbard">copyWktToClipbard</a></li></ul></div><div class="category"><h2>Provider</h2><h3>Utils</h3><ul><li><a href="global.html#connectToContext">connectToContext</a></li></ul></div><div class="category"><h2>TimeSlider</h2><h3>Components</h3><ul><li><a href="TimeSlider.html">TimeSlider</a></li><li><a href="TimeSliderBase.html">TimeSliderBase</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop" id="main-content-wrapper">
                <div class="content">
                    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from 'react'
import PropTypes from 'prop-types'
import moment from 'moment'
// update to @material-ui/pickers v4 when they add range support:
// https://github.com/mui-org/material-ui-pickers/issues/364#issuecomment-575697596
import { MuiPickersUtilsProvider, DatePicker } from '@material-ui/pickers'
import MomentUtils from '@date-io/moment'

import Button from '@material-ui/core/Button'
import Card from '@material-ui/core/Card'
import Tabs from '@material-ui/core/Tabs'
import Tab from '@material-ui/core/Tab'
import Box from '@material-ui/core/Box'
import Grid from '@material-ui/core/Grid'
import Typography from '@material-ui/core/Typography'
import IconButton from '@material-ui/core/IconButton'
import CloseIcon from '@material-ui/icons/Close'
import SyncIcon from '@material-ui/icons/Sync'

import en from 'locales/en'
import { connectToContext } from 'Provider'
import {
  Container,
  LayerTitle,
  DateContainer,
  MarkContainer,
  TimesliderBar,
  HighlightedRange,
  BarContainer,
  DateMark,
  BottomContainer,
  Tickmark,
  TooManyForPreview
} from './styled'
import { datesDiffDay, datesSameDay } from './utils'

// const MAX_DATES = 300

function TabPanel (props) {
  const { children, value, index } = props

  return value === index &amp;&amp; &lt;Box p={3} style={{ padding: '10px 24px' }}>{children}&lt;/Box>
}

TabPanel.propTypes = {
  children: PropTypes.node,
  value: PropTypes.number,
  index: PropTypes.number
}

/**
 * TimeSliderBase component ui used by TimeSlider
 * @component
 * @category TimeSlider
 * @since 0.12.0
 */
class TimeSliderBase extends React.Component {
  constructor (props) {
    super(props)

    this.state = {
      dates: [],
      numOfDays: 0,
      selectedDate: null,
      selectedDateRange: [],
      leftPosition: 0,
      rangeMin: 0,
      rangeMax: 0,
      isMouseDown: false,
      firstDayOfFirstMonth: undefined,
      index: 0
    }

    // these refs are used to increase performance &amp; calculcate offsets
    this.highlightDiv = null
    this.containerNode = null
    this.dateContainerDiv = null
    this.markContainer = null

    this.keydownHandler = e => this.cycleDates(e.key)
  }

  componentDidMount () {
    const { tabs } = this.props

    tabs.length &amp;&amp; this.createDateTicks(tabs[this.state.index])
    // this.props.layer.on('filter:change', this.moveHandler)

    // this listener allows the user to go next/back through the data via arrow keys
    document.addEventListener('keydown', this.keydownHandler)
  }

  componentWillUnmount () {
    // this.props.layer.un('filter:change', this.moveHandler)
    document.removeEventListener('keydown', this.keydownHandler)
  }

  UNSAFE_componentWillReceiveProps (nextProps) { // eslint-disable-line camelcase
    if (nextProps.tabs.length) this.createDateTicks(nextProps.tabs[this.state.index])
  }

  createDateTicks = tab => {
    const dates = tab.dates
      .map(date => new Date(date)) /* we convert all dates to JS dates for easier use */
      .sort((a, b) => a - b) /* the sort must happen before the filter in order to remove dup dates */
      .filter((d, i, a) => datesDiffDay(a[i], a[i - 1])) /* this removes dup dates (precision is down to the day) */
    const firstDayOfFirstMonth = moment(dates[0]).startOf('month')

    this.setState({
      dates,
      tooManyDates: false,
      selectedDate: null,
      selectedDateRange: [],
      firstDayOfFirstMonth,
      numOfDays: moment(dates[dates.length - 1]).diff(moment(dates[0]), 'days', true)
    })
  }

  calculateLeftPlacement = (date, elementWidth, containerWidth, padding = 24) => {
    const { dates } = this.state

    const adjustedContainerWidth = containerWidth - padding // the useable area within the container is the container's width minus the padding
    const datesInRange = moment(dates[dates.length - 1]).diff(moment(dates[0])) // the length of time represented in the current range
    const timeToPixels = adjustedContainerWidth / datesInRange // the ratio of time to pixels
    const deltaTime = moment(date).diff(moment(dates[0])) // the length of time that has elapsed since the first date in the range
    /**
      deltaTime * timeToPixels => the number of pixels represented by the time thast has elapsed
      deltaTime * timeToPixels - (elementWidth / 2) => subtract half of the element's width to center the placed elements
      (deltaTime * timeToPixels - (elementWidth / 2)) + padding => compensate for the padding
    */
    const initialLeftPosition = (deltaTime * timeToPixels - (elementWidth / 2)) + padding
    const leftPosition = initialLeftPosition &lt; adjustedContainerWidth // if the calculated position is greater than the total length (this typically happens with the last element in the range) we need to subtract the padding
      ? initialLeftPosition
      : initialLeftPosition - padding

    return leftPosition >= 0 ? leftPosition : 0 // safety check to make sure we don't end up with any negative values
  }

  calculateDateSliderPosition = (date, e) => {
    const { rangeMin, rangeMax, dates } = this.state
    const { leftDate, rightDate } = this.setDatesForCalendar(rangeMin, rangeMax)

    if (rangeMax - rangeMin !== 0) {
      const selectedDateRange = [leftDate, rightDate]

      this.setState({
        isMouseDown: false,
        selectedDateRange,
        selectedDate: null
      })
      this.props.onDatesChange({
        id: this.props.tabs[this.state.index].id,
        selectedDateRange
      })
    } else {
      const selectedDateRange = [dates[0], dates[dates.length - 1]]

      this.setState({ selectedDateRange })
      this.props.onDatesChange({
        id: this.props.tabs[this.state.index].id,
        selectedDateRange
      })
    }
  }

  setDatesForCalendar = (leftPosition, rightPosition) => {
    const { numOfDays, dates } = this.state
    const { width: timeSliderWidth } = this.containerNode.getBoundingClientRect()
    const leftDate = (leftPosition / (timeSliderWidth - 4)) * numOfDays
    const rightDate = (rightPosition / (timeSliderWidth + 4)) * numOfDays

    return {
      leftDate: new Date(moment(dates[0]).add(leftDate, 'days')),
      rightDate: new Date(moment(dates[0]).add(rightDate, 'days'))
    }
  }

  cycleDates = direction => {
    const { selectedDate, dates } = this.state
    const index = dates.findIndex(d => d === selectedDate)

    // if no single date is selected and you hit the right arrow key
    // set the first possible date as the selected date
    if (direction === 'ArrowRight' &amp;&amp; selectedDate === null) return this.setSelectedDate(dates[0])

    // depending on right/left arrow we select the next/previous date
    if (direction === 'ArrowRight') {
      index + 1 === dates.length
        ? this.setSelectedDate(dates[dates.length - 1])
        : this.setSelectedDate(dates[index + 1])
    } else if (direction === 'ArrowLeft') {
      index - 1 &lt; 0
        ? this.setSelectedDate(dates[0])
        : this.setSelectedDate(dates[index - 1])
    }
  }

  setSelectedDate = selectedDate => {
    const selectedDateRange = []

    // if a single date is selected, you cannot also have a date range selected
    this.setState({
      selectedDate,
      selectedDateRange
    })
    this.props.onDatesChange({
      id: this.props.tabs[this.state.index].id,
      selectedDate,
      selectedDateRange
    })
  }

  updateSelectedRange (first, second) {
    if (first &lt; second) {
      this.setState({ rangeMin: first, rangeMax: second })
    } else {
      this.setState({ rangeMin: second, rangeMax: first })
    }
  }

  // this tracks if the mouse is being dragged on the slider
  handleMouseDown = e => {
    this.setState({
      isMouseDown: true,
      mouseDownEpoch: Date.now(),
      firstPosition: e.pageX - this.containerNode.getBoundingClientRect().left
    })
  }

  // we do a direct DOM access to avoid tons of setState re-renders
  handleMouseMove = e => {
    const { isMouseDown, firstPosition } = this.state

    if (isMouseDown) {
      const secondPosition = e.clientX - this.containerNode.getBoundingClientRect().left

      this.updateSelectedRange(firstPosition, secondPosition)
    }
  }

  handleMouseUp = e => {
    const { rangeMin, rangeMax, mouseDownEpoch } = this.state
    // const rightPosition = e.pageX - this.containerNode.getBoundingClientRect().left
    const { leftDate, rightDate } = this.setDatesForCalendar(rangeMin, rangeMax)

    this.calculateDateSliderPosition()

    // we manually calculate if the mouse is being clicked vs dragged
    if (Date.now() - mouseDownEpoch > 250) {
      this.setState({
        isMouseDown: false,
        selectedDate: null,
        selectedDateRange: [leftDate, rightDate]
      })
    } else {
      this.setState({ isMouseDown: false })
    }
  }

  resetState = () => {
    const selectedDate = null
    const selectedDateRange = []

    this.setState({
      selectedDate,
      selectedDateRange,
      leftPosition: 0,
      rangeMin: 0,
      rangeMax: 0
    })
    this.props.onDatesChange({
      id: this.props.tabs[this.state.index].id,
      selectedDate,
      selectedDateRange
    })
  }

  // loops through the date range and renders the dates on the top of the timeslider
  renderLabels = (dates, firstDayOfFirstMonth) => {
    const display = date => moment(date).format(`MMM 'YY`)
    const padding = 24

    // if no dates or ref is undefined, do not proceed
    if (!dates?.length || !this.dateContainerDiv) return

    const { width: containerWidth } = this.dateContainerDiv.getBoundingClientRect()
    const monthsInRange = Math.ceil(moment(dates[dates.length - 1]).diff(moment(dates[0]), 'months', true)) // the ceiling number of months in the range to avoid vals &lt; 1
    const calcLabelWidth = (divisor) => (containerWidth - padding) / (monthsInRange / divisor) // calculate the width of the label
    const datesDiv = []

    let divisor = 1

    while (calcLabelWidth(divisor) &lt; 50 &amp;&amp; divisor &lt; 10) divisor += 1 // make sure our labels are at least 50px wide but only try for 10 iterations
    const labelWidth = calcLabelWidth(divisor)

    for (let i = 0; i &lt; monthsInRange; i += divisor) { // interate by the divisor
      const futureMonth = moment(firstDayOfFirstMonth).add(i, 'M')
      const position = i > 0 ? i / divisor : 0 // get the current date's position relative to the other date labels
      const initialLeftPosition = position * labelWidth + padding
      const leftPosition = initialLeftPosition &lt;= containerWidth ? initialLeftPosition : initialLeftPosition - padding // calculate the position of the label with a similar algorithm to that described in calculateLeftPlacement

      datesDiv.push(&lt;DateMark
        key={i}
        left={leftPosition}
        width={labelWidth}>{display(futureMonth)}&lt;/DateMark>)
    }

    return datesDiv
  }

  // loops through the captured data and displays a mark for each image
  renderMarks = ({ dates, tickColor }) => {
    const { selectedDate } = this.state
    const padding = 24

    if (!this.markContainer) return
    const { width: containerWidth } = this.markContainer.getBoundingClientRect()

    const ticks = dates.map((date, i) => {
      const leftPosition = this.calculateLeftPlacement(date, 4, containerWidth, padding)

      return (
        &lt;Tickmark
          key={i}
          selected={moment(dates[i]).isSame(selectedDate)}
          style={{ left: `${leftPosition}px` }}
          tickColor={tickColor}>
        &lt;/Tickmark>
      )
    })

    return ticks
  }

  onTabClicked = (_, index) => {
    this.setState({ index })
    this.props.onTabChange(index)
  }

  render () {
    const { tabs, translations } = this.props
    const {
      tooManyDates,
      dates,
      selectedDate,
      selectedDateRange,
      firstDayOfFirstMonth,
      rangeMin,
      rangeMax,
      index
    } = this.state

    return (
      &lt;MuiPickersUtilsProvider utils={MomentUtils}>
        &lt;Typography component='div'>
          &lt;Container>
            &lt;Grid container justify='center'>
              &lt;Card style={{ width: '100%', paddingTop: '4px' }}>
                &lt;Tabs
                  style={{ marginRight: '60px' }}
                  indicatorColor='primary'
                  value={index}
                  onChange={this.onTabClicked}
                  aria-label='simple tabs example'
                  variant='scrollable'
                  scrollButtons='auto'>
                  {tabs.map((tab, i) => (
                    &lt;Tab label={`Layer ${i + 1}`} key={i} />
                  ))}
                &lt;/Tabs>
                {tooManyDates ? (
                  &lt;TooManyForPreview>{translations['_ol_kit_.TimeSliderBase.tooMany']}&lt;/TooManyForPreview>
                ) : (
                  tabs.map((tab, i) => (
                    &lt;TabPanel value={index} index={index} key={i}>
                      &lt;LayerTitle>{tab.title}&lt;/LayerTitle>
                      &lt;DateContainer ref={node => { this.dateContainerDiv = node }}>
                        {this.renderLabels(dates, firstDayOfFirstMonth)}
                      &lt;/DateContainer>
                      &lt;BarContainer
                        onMouseDown={this.handleMouseDown}
                        onMouseUp={this.handleMouseUp}
                        onMouseMove={this.handleMouseMove}
                        ref={node => { this.containerNode = node }}>
                        &lt;TimesliderBar barPlacement={16} barHeight={2} />
                        &lt;MarkContainer
                          ref={node => { this.markContainer = node }}>
                          {this.renderMarks(tab)}
                        &lt;/MarkContainer>
                        &lt;HighlightedRange
                          style={{ display: rangeMin || rangeMax ? 'block' : 'none' }}
                          left={rangeMin}
                          right={rangeMax}
                          width={rangeMax - rangeMin}
                          ref={node => { this.highlightDiv = node }} />
                      &lt;/BarContainer>
                    &lt;/TabPanel>
                  ))
                )}
                &lt;BottomContainer>
                  {translations['_ol_kit_.TimeSliderBase.dateRange'] || 'Date Range'}
                  &lt;DatePicker
                    disableFuture
                    variant='inline'
                    format='DD/MM/YYYY'
                    value={selectedDateRange.length ? selectedDateRange[0] : dates[0]}
                    onChange={date => {
                      this.calculateDateSliderPosition()
                      const { width } = this.containerNode.getBoundingClientRect()

                      this.setState({
                        selectedDateRange: [date, selectedDateRange[1]],
                        rangeMin: this.calculateLeftPlacement(date, 1, width, 24)
                      })
                    }} />
                  {` ${translations['_ol_kit_.TimeSliderBase.to'] || 'To'} `}
                  &lt;DatePicker
                    disableFuture
                    variant='inline'
                    format='DD/MM/YYYY'
                    value={selectedDateRange.length ? selectedDateRange[1] : dates[dates.length - 1]}
                    onChange={date => {
                      this.calculateDateSliderPosition()
                      const { width } = this.containerNode.getBoundingClientRect()

                      this.setState({
                        selectedDateRange: [selectedDateRange[0], date],
                        rangeMax: this.calculateLeftPlacement(date, 1, width, 24)
                      })
                    }} />

                  &lt;Button disabled={!selectedDate} onClick={() => this.cycleDates('ArrowLeft')} variant='contained' color='primary' style={{ marginRight: '5px' }}>
                    {translations['_ol_kit_.TimeSliderBase.previous']}
                  &lt;/Button>
                  &lt;Button disabled={datesSameDay(selectedDate, dates[dates.length - 1])} onClick={() => this.cycleDates('ArrowRight')} variant='contained' color='primary'>
                    {translations['_ol_kit_.TimeSliderBase.next']}
                  &lt;/Button>

                  &lt;IconButton onClick={this.resetState}>
                    &lt;SyncIcon color='primary' />
                  &lt;/IconButton>
                &lt;/BottomContainer>
                &lt;IconButton onClick={this.props.onClose} style={{ position: 'absolute', top: '5px', right: '5px' }} aria-label='delete'>
                  &lt;CloseIcon />
                &lt;/IconButton>
              &lt;/Card>
            &lt;/Grid>
          &lt;/Container>
        &lt;/Typography>
      &lt;/MuiPickersUtilsProvider>
    )
  }
}

TimeSliderBase.defaultProps = {
  onClose: () => {},
  onDatesChange: () => {},
  onTabChange: () => {},
  translations: en
}

TimeSliderBase.propTypes = {
  /** callback fired when TimeSliderBase 'x' is clicked  */
  onClose: PropTypes.func,
  /** callback fired when date selection or range is changed */
  onDatesChange: PropTypes.func,
  /** callback fired when a new tab is clicked */
  onTabChange: PropTypes.func,
  /** separates tabs + corresponding dates into groups */
  tabs: PropTypes.arrayOf(PropTypes.shape({
    dates: PropTypes.array,
    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),
    tickColor: PropTypes.string,
    title: PropTypes.string
  })),
  /** object with key/value pairs for translated strings */
  translations: PropTypes.shape({
    '_ol_kit_.TimeSliderBase.dateRange': PropTypes.string,
    '_ol_kit_.TimeSliderBase.next': PropTypes.string,
    '_ol_kit_.TimeSliderBase.previous': PropTypes.string,
    '_ol_kit_.TimeSliderBase.selectedEndDate': PropTypes.string,
    '_ol_kit_.TimeSliderBase.selectedStartDate': PropTypes.string,
    '_ol_kit_.TimeSliderBase.to': PropTypes.string,
    '_ol_kit_.TimeSliderBase.tooMany': PropTypes.string
  })
}

export default connectToContext(TimeSliderBase)
</code></pre>
        </article>
    </section>




                </div>
            </div>
        </div>
    </div>
<footer class="footer">
    <div class="content has-text-centered">
        <div style="margin: 0 auto; text-align: center; background: white; margin: 30px 0;">
            <a href="https://www.cropscience.bayer.com" target="_blank">
                <img src="static/bayer-logo.png" width="200px" />
            </a>
            <div>&copy; 2020 Bayer Crop Science; All Rights Reserved.</div>
        </div>
    </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js" integrity="sha256-vrn14y7WH7zgEElyQqm2uCGSQrX/xjYDjniRUQx3NyU=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/sticky-sidebar/dist/sticky-sidebar.min.js"></script>
<script src="scripts/app.js"></script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
